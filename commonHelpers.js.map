{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconst dateField = document.querySelector('#datetime-picker');\nconst startButton = document.querySelector('button[data-start]');\nconst daysField = document.querySelector('span[data-days]');\nconst hoursField = document.querySelector('span[data-hours]');\nconst minutesField = document.querySelector('span[data-minutes]');\nconst secondsField = document.querySelector('span[data-seconds]');\n\nlet choosenDate = '';\n\nfunction normalizeTime(v) {\n  return String(v).padStart(2, '0');\n}\n\nfunction updateClock({ days, hours, minutes, seconds }) {\n  daysField.textContent = normalizeTime(days);\n  hoursField.textContent = normalizeTime(hours);\n  minutesField.textContent = normalizeTime(minutes);\n  secondsField.textContent = normalizeTime(seconds);\n}\n\nfunction errMessage() {\n  iziToast.show({\n    position: 'topRight',\n    messageColor: 'white',\n    iconUrl: 'error.svg',\n    iconColor: 'white',\n    color: '#EF4040',\n    message: 'Please choose a date in the future',\n  });\n  startButton.removeEventListener('click', startTimer);\n  startButton.classList.remove('is-active');\n}\n\nfunction startTimer() {\n  if (choosenDate.getTime() < Date.now()) {\n    errMessage();\n    return;\n  }\n  dateField.classList.add('is-disable');\n  dateField.setAttribute('disabled', '');\n  startButton.removeEventListener('click', startTimer);\n  startButton.classList.remove('is-active');\n  let intervalID = setInterval(() => {\n    const currentTime = Date.now();\n    const timeLeft = choosenDate.getTime() - currentTime;\n    const time = convertMs(timeLeft);\n    updateClock(time);\n\n    if (\n      time.days < 1 &&\n      time.hours < 1 &&\n      time.minutes < 1 &&\n      time.seconds < 1\n    ) {\n      clearInterval(intervalID);\n      dateField.removeAttribute('disabled');\n      dateField.classList.remove('is-disable');\n    }\n  }, 1000);\n}\n\nfunction dateValidate() {\n  if (choosenDate.getTime() < Date.now()) {\n    errMessage();\n  } else {\n    startButton.addEventListener('click', startTimer);\n    startButton.classList.add('is-active');\n  }\n}\n\nflatpickr(dateField, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    choosenDate = selectedDates[0];\n    dateValidate();\n  },\n});\n"],"names":["convertMs","ms","days","hours","minutes","seconds","dateField","startButton","daysField","hoursField","minutesField","secondsField","choosenDate","normalizeTime","v","updateClock","errMessage","iziToast","startTimer","intervalID","currentTime","timeLeft","time","dateValidate","flatpickr","selectedDates"],"mappings":"0IAKA,SAASA,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,MAAMC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EAEhE,IAAIC,EAAc,GAElB,SAASC,EAAcC,EAAG,CACxB,OAAO,OAAOA,CAAC,EAAE,SAAS,EAAG,GAAG,CAClC,CAEA,SAASC,EAAY,CAAE,KAAAb,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtDG,EAAU,YAAcK,EAAcX,CAAI,EAC1CO,EAAW,YAAcI,EAAcV,CAAK,EAC5CO,EAAa,YAAcG,EAAcT,CAAO,EAChDO,EAAa,YAAcE,EAAcR,CAAO,CAClD,CAEA,SAASW,GAAa,CACpBC,EAAS,KAAK,CACZ,SAAU,WACV,aAAc,QACd,QAAS,YACT,UAAW,QACX,MAAO,UACP,QAAS,oCACb,CAAG,EACDV,EAAY,oBAAoB,QAASW,CAAU,EACnDX,EAAY,UAAU,OAAO,WAAW,CAC1C,CAEA,SAASW,GAAa,CACpB,GAAIN,EAAY,QAAO,EAAK,KAAK,IAAG,EAAI,CACtCI,IACA,MACD,CACDV,EAAU,UAAU,IAAI,YAAY,EACpCA,EAAU,aAAa,WAAY,EAAE,EACrCC,EAAY,oBAAoB,QAASW,CAAU,EACnDX,EAAY,UAAU,OAAO,WAAW,EACxC,IAAIY,EAAa,YAAY,IAAM,CACjC,MAAMC,EAAc,KAAK,MACnBC,EAAWT,EAAY,QAAO,EAAKQ,EACnCE,EAAOtB,EAAUqB,CAAQ,EAC/BN,EAAYO,CAAI,EAGdA,EAAK,KAAO,GACZA,EAAK,MAAQ,GACbA,EAAK,QAAU,GACfA,EAAK,QAAU,IAEf,cAAcH,CAAU,EACxBb,EAAU,gBAAgB,UAAU,EACpCA,EAAU,UAAU,OAAO,YAAY,EAE1C,EAAE,GAAI,CACT,CAEA,SAASiB,GAAe,CAClBX,EAAY,QAAO,EAAK,KAAK,IAAG,EAClCI,KAEAT,EAAY,iBAAiB,QAASW,CAAU,EAChDX,EAAY,UAAU,IAAI,WAAW,EAEzC,CAEAiB,EAAUlB,EAAW,CACnB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQmB,EAAe,CACrBb,EAAca,EAAc,GAC5BF,GACD,CACH,CAAC"}